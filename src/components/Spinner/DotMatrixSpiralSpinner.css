/* DotMatrixSpiralSpinner base styles */
.gn-DotMatrixSpiralSpinner {
  position: relative;
  width: var(--spiral-size);
  height: var(--spiral-size);
}

/* Size variants */
.gn-DotMatrixSpiralSpinner--sm {
  --spiral-size: 40px;
  --dot-size: 6px;
}

.gn-DotMatrixSpiralSpinner--md {
  --spiral-size: 60px;
  --dot-size: 10px;
}

.gn-DotMatrixSpiralSpinner--lg {
  --spiral-size: 80px;
  --dot-size: 14px;
}

/* Dot styles */
.gn-DotMatrixSpiralSpinner__dot {
  position: absolute;
  width: var(--dot-size);
  height: var(--dot-size);
  background-color: var(--dot-color, var(--accent-9));
  border-radius: 50%;
  top: 50%;
  left: 50%;
  animation: dot-spiral-pulse var(--animation-duration, 2.5s) ease-in-out infinite;
  animation-delay: var(--animation-delay, 0s);
}

/* Position dots in a spiral using CSS variables */
.gn-DotMatrixSpiralSpinner__dot {
  transform: translate(-50%, -50%)
             translate(
               calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
               calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
             );
}

/* Pulse animation for outward direction */
.gn-DotMatrixSpiralSpinner--outward .gn-DotMatrixSpiralSpinner__dot {
  animation-name: dot-spiral-pulse-outward;
}

/* Pulse animation for inward direction */
.gn-DotMatrixSpiralSpinner--inward .gn-DotMatrixSpiralSpinner__dot {
  animation-name: dot-spiral-pulse-inward;
}

/* Outward animation - dots expand from center */
@keyframes dot-spiral-pulse-outward {
  0% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(0.3);
    opacity: 0.3;
  }
  50% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(1.2);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(0.3);
    opacity: 0.3;
  }
}

/* Inward animation - dots pulse from outside to center */
@keyframes dot-spiral-pulse-inward {
  0% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(1.2);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(0.3);
    opacity: 0.3;
  }
  100% {
    transform: translate(-50%, -50%)
               translate(
                 calc(cos(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size))),
                 calc(sin(var(--spiral-angle)) * var(--spiral-radius) * calc(var(--spiral-size) / 2 - var(--dot-size)))
               )
               scale(1.2);
    opacity: 1;
  }
}

/* Multicolor variant - Spiral Color Flow */
.gn-DotMatrixSpiralSpinner--multicolor {
  --color-cycle-duration: 9s;
}

.gn-DotMatrixSpiralSpinner--multicolor .gn-DotMatrixSpiralSpinner__dot {
  box-shadow: 0 0 10px currentColor;
}

.gn-DotMatrixSpiralSpinner--multicolor.gn-DotMatrixSpiralSpinner--outward .gn-DotMatrixSpiralSpinner__dot {
  animation: dot-spiral-pulse-outward var(--animation-duration, 2.5s) ease-in-out infinite,
             dot-spiral-color-flow-out var(--color-cycle-duration) linear infinite;
}

.gn-DotMatrixSpiralSpinner--multicolor.gn-DotMatrixSpiralSpinner--inward .gn-DotMatrixSpiralSpinner__dot {
  animation: dot-spiral-pulse-inward var(--animation-duration, 2.5s) ease-in-out infinite,
             dot-spiral-color-flow-in var(--color-cycle-duration) linear infinite;
}

/* Color flow animation - outward (center to edge) */
@keyframes dot-spiral-color-flow-out {
  0% {
    filter: hue-rotate(calc(var(--hue-offset) + 0deg)) saturate(1.3) brightness(1.1);
  }
  100% {
    filter: hue-rotate(calc(var(--hue-offset) + 360deg)) saturate(1.3) brightness(1.1);
  }
}

/* Color flow animation - inward (edge to center) */
@keyframes dot-spiral-color-flow-in {
  0% {
    filter: hue-rotate(calc(360deg - var(--hue-offset) + 0deg)) saturate(1.3) brightness(1.1);
  }
  100% {
    filter: hue-rotate(calc(360deg - var(--hue-offset) + 360deg)) saturate(1.3) brightness(1.1);
  }
}

/* Accessibility - Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .gn-DotMatrixSpiralSpinner--multicolor .gn-DotMatrixSpiralSpinner__dot {
    animation-name: dot-spiral-pulse-outward;
    filter: none;
    box-shadow: 0 0 8px var(--dot-color);
  }

  .gn-DotMatrixSpiralSpinner--multicolor.gn-DotMatrixSpiralSpinner--inward .gn-DotMatrixSpiralSpinner__dot {
    animation-name: dot-spiral-pulse-inward;
  }
}
