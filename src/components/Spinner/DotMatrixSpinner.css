/* DotMatrixSpinner base styles */
.gn-DotMatrixSpinner {
  display: grid;
  gap: var(--dot-gap, 8px);
  width: fit-content;
}

/* Grid size variants */
.gn-DotMatrixSpinner--grid-3 {
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
}

.gn-DotMatrixSpinner--grid-4 {
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, 1fr);
}

.gn-DotMatrixSpinner--grid-5 {
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(5, 1fr);
}

/* Size variants */
.gn-DotMatrixSpinner--sm {
  --dot-size: 6px;
  --dot-gap: 4px;
}

.gn-DotMatrixSpinner--md {
  --dot-size: 10px;
  --dot-gap: 8px;
}

.gn-DotMatrixSpinner--lg {
  --dot-size: 14px;
  --dot-gap: 12px;
}

/* Dot styles */
.gn-DotMatrixSpinner__dot {
  width: var(--dot-size);
  height: var(--dot-size);
  background-color: var(--dot-color, var(--accent-9));
  border-radius: 50%;
  animation: dot-matrix-pulse var(--spinner-duration, 2s) ease-in-out infinite;
  animation-delay: var(--animation-delay, 0s);
}

/* Pulse animation */
@keyframes dot-matrix-pulse {
  0%,
  100% {
    transform: scale(0.5);
    opacity: 0.3;
  }
  50% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Wave animation alternative (can be toggled by adding a class) */
@keyframes dot-matrix-wave {
  0%,
  100% {
    transform: translateY(0) scale(1);
    opacity: 0.5;
  }
  50% {
    transform: translateY(-8px) scale(1.2);
    opacity: 1;
  }
}

/* Fade animation alternative */
@keyframes dot-matrix-fade {
  0%,
  100% {
    opacity: 0.2;
  }
  50% {
    opacity: 1;
  }
}

/* Multicolor variant - Wave Color Propagation */
.gn-DotMatrixSpinner--multicolor {
  --color-cycle-duration: 10s;
}

.gn-DotMatrixSpinner--multicolor .gn-DotMatrixSpinner__dot {
  animation:
    dot-matrix-pulse var(--spinner-duration, 2s) ease-in-out infinite,
    dot-matrix-color-wave var(--color-cycle-duration) linear infinite;
  animation-delay:
    var(--animation-delay, 0s), calc(var(--animation-delay, 0s) * 0.5);
}

/* Color wave animation - flows across the grid */
@keyframes dot-matrix-color-wave {
  0% {
    filter: hue-rotate(calc(var(--hue-offset) + 0deg)) saturate(1.3)
      brightness(1.1);
  }
  100% {
    filter: hue-rotate(calc(var(--hue-offset) + 360deg)) saturate(1.3)
      brightness(1.1);
  }
}

/* Accessibility - Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .gn-DotMatrixSpinner--multicolor .gn-DotMatrixSpinner__dot {
    animation: none;
    opacity: 0.7;
  }
}
